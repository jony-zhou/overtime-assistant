# æ›´æ–°æ©Ÿåˆ¶è¨­è¨ˆæ–‡ä»¶

> **ç‰ˆæœ¬**: v1.2.0+  
> **è¨­è¨ˆåŸå‰‡**: SOLIDã€DRYã€KISSã€YAGNI  
> **å®‰å…¨æ€§**: éµå¾ª OWASP æœ€ä½³å¯¦è¸

---

## ğŸ“‹ ç›®éŒ„

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [æ¶æ§‹è¨­è¨ˆ](#æ¶æ§‹è¨­è¨ˆ)
3. [ä½¿ç”¨è€…é«”é©—æµç¨‹](#ä½¿ç”¨è€…é«”é©—æµç¨‹)
4. [å¯¦ä½œç´°ç¯€](#å¯¦ä½œç´°ç¯€)
5. [æœªä¾†æ”¹é€²æ–¹æ¡ˆ](#æœªä¾†æ”¹é€²æ–¹æ¡ˆ)

---

## æ¦‚è¿°

### ç•¶å‰å¯¦ä½œ (v1.2.0)

#### ç‰¹é»
- âœ… **è‡ªå‹•æª¢æŸ¥**: ç¨‹å¼å•Ÿå‹•æ™‚è‡ªå‹•æª¢æŸ¥ GitHub Releases
- âœ… **æ‰‹å‹•æª¢æŸ¥**: ä¸»è¦–çª—æä¾›ã€Œæª¢æŸ¥æ›´æ–°ã€æŒ‰éˆ•
- âœ… **æ™ºæ…§å°è©±æ¡†**: é¡¯ç¤ºç‰ˆæœ¬å·®ç•°ã€æ›´æ–°å…§å®¹ã€ä¸‹è¼‰é€£çµ
- âœ… **å¿«é€Ÿæ›´æ–°**: ã€Œä¸‹è¼‰ä¸¦é—œé–‰ã€ä¸€éµæ“ä½œ
- âœ… **ç„¡å¿«å–ç­–ç•¥**: ç¢ºä¿æ¯æ¬¡éƒ½æª¢æŸ¥æœ€æ–°ç‰ˆæœ¬

#### é™åˆ¶
- âš ï¸ **æ‰‹å‹•å®‰è£**: ä½¿ç”¨è€…éœ€æ‰‹å‹•åŸ·è¡Œæ–°ç‰ˆ EXE
- âš ï¸ **å–®ä¸€ EXE**: åŸ·è¡Œä¸­çš„æª”æ¡ˆç„¡æ³•è‡ªå‹•æ›¿æ›

---

## æ¶æ§‹è¨­è¨ˆ

### å…ƒä»¶è·è²¬ (SOLID - Single Responsibility)

```
UpdateService (src/services/update_service.py)
â”œâ”€â”€ check_for_updates()          # æª¢æŸ¥ GitHub Releases API
â”œâ”€â”€ _get_windows_exe_url()       # è§£æä¸‹è¼‰é€£çµ
â””â”€â”€ [å·²ç§»é™¤å¿«å–æ©Ÿåˆ¶]             # ç¢ºä¿å³æ™‚æ€§

UpdateDialog (ui/components/update_dialog.py)
â”œâ”€â”€ _create_widgets()            # å»ºç«‹ UI å…ƒä»¶
â”œâ”€â”€ _on_download_and_close()     # ä¸‹è¼‰ä¸¦é—œé–‰ç¨‹å¼
â”œâ”€â”€ _on_download()               # åƒ…é–‹å•Ÿä¸‹è¼‰é é¢
â””â”€â”€ _close_application()         # é—œé–‰æ‡‰ç”¨ç¨‹å¼

MainWindow (ui/main_window.py)
â”œâ”€â”€ _check_for_updates()         # è‡ªå‹•æª¢æŸ¥ (å•Ÿå‹•æ™‚)
â”œâ”€â”€ on_check_update()            # æ‰‹å‹•æª¢æŸ¥ (æŒ‰éˆ•è§¸ç™¼)
â”œâ”€â”€ _check_update_task()         # èƒŒæ™¯ä»»å‹™
â””â”€â”€ _on_manual_update_check_complete()  # å®Œæˆå›èª¿
```

### è³‡æ–™æµç¨‹

```mermaid
sequenceDiagram
    participant User as ä½¿ç”¨è€…
    participant UI as MainWindow
    participant Service as UpdateService
    participant GitHub as GitHub API
    participant Dialog as UpdateDialog
    participant Browser as ç€è¦½å™¨

    %% è‡ªå‹•æª¢æŸ¥æµç¨‹
    UI->>Service: check_for_updates()
    Service->>GitHub: GET /repos/{owner}/{repo}/releases/latest
    GitHub-->>Service: Release Data
    Service->>Service: æ¯”å°ç‰ˆæœ¬è™Ÿ
    Service-->>UI: update_info
    UI->>Dialog: show_update_dialog(update_info)
    Dialog->>User: é¡¯ç¤ºæ›´æ–°é€šçŸ¥

    %% æ‰‹å‹•æª¢æŸ¥æµç¨‹
    User->>UI: é»æ“Šã€Œæª¢æŸ¥æ›´æ–°ã€
    UI->>Service: check_for_updates()
    Service->>GitHub: GET /repos/{owner}/{repo}/releases/latest
    GitHub-->>Service: Release Data
    Service-->>UI: update_info
    
    alt æœ‰æ›´æ–°
        UI->>Dialog: show_update_dialog(update_info)
        Dialog->>User: é¡¯ç¤ºæ›´æ–°é€šçŸ¥
    else ç„¡æ›´æ–°
        UI->>User: é¡¯ç¤ºã€Œå·²æ˜¯æœ€æ–°ç‰ˆæœ¬ã€
    end

    %% ä¸‹è¼‰æµç¨‹
    User->>Dialog: é»æ“Šã€Œä¸‹è¼‰ä¸¦é—œé–‰ã€
    Dialog->>Browser: é–‹å•Ÿä¸‹è¼‰é€£çµ
    Browser-->>User: ä¸‹è¼‰æ–°ç‰ˆ EXE
    Dialog->>UI: quit()
    UI->>User: ç¨‹å¼é—œé–‰
```

---

## ä½¿ç”¨è€…é«”é©—æµç¨‹

### æƒ…å¢ƒ 1: è‡ªå‹•æª¢æŸ¥æ›´æ–° (å•Ÿå‹•æ™‚)

```
1. ä½¿ç”¨è€…å•Ÿå‹•ç¨‹å¼
   â†“
2. ç™»å…¥æˆåŠŸå¾Œ,èƒŒæ™¯æª¢æŸ¥æ›´æ–° (å»¶é² 1 ç§’)
   â†“
3. å¦‚æœæœ‰æ–°ç‰ˆæœ¬
   â”œâ”€â†’ é¡¯ç¤ºæ›´æ–°å°è©±æ¡†
   â”‚   â”œâ”€â”€ ç‰ˆæœ¬æ¯”è¼ƒ (ç›®å‰ â†’ æœ€æ–°)
   â”‚   â”œâ”€â”€ æ›´æ–°å…§å®¹ (Release Notes)
   â”‚   â””â”€â”€ ä¸‰å€‹æŒ‰éˆ•:
   â”‚       â”œâ”€â”€ â¬‡ï¸ ä¸‹è¼‰æ–°ç‰ˆæœ¬ä¸¦é—œé–‰ (æ¨è–¦)
   â”‚       â”œâ”€â”€ ğŸ“¥ åƒ…é–‹å•Ÿä¸‹è¼‰é é¢
   â”‚       â””â”€â”€ ç¨å¾Œæé†’
   â””â”€â†’ æ²’æœ‰æ›´æ–°å‰‡éœé»˜è·³é
```

### æƒ…å¢ƒ 2: æ‰‹å‹•æª¢æŸ¥æ›´æ–°

```
1. ä½¿ç”¨è€…é»æ“Šã€ŒğŸ”„ æª¢æŸ¥æ›´æ–°ã€æŒ‰éˆ•
   â†“
2. æŒ‰éˆ•é¡¯ç¤ºã€ŒğŸ”„ æª¢æŸ¥ä¸­...ã€ä¸¦ç¦ç”¨
   â†“
3. èƒŒæ™¯æŸ¥è©¢ GitHub API
   â†“
4. æª¢æŸ¥å®Œæˆ:
   â”œâ”€â†’ æœ‰æ›´æ–°: é¡¯ç¤ºæ›´æ–°å°è©±æ¡†
   â””â”€â†’ ç„¡æ›´æ–°: é¡¯ç¤ºã€Œå·²æ˜¯æœ€æ–°ç‰ˆæœ¬ã€è¨Šæ¯æ¡†
```

### æƒ…å¢ƒ 3: ä¸‹è¼‰ä¸¦å®‰è£æ–°ç‰ˆæœ¬

```
1. ä½¿ç”¨è€…é»æ“Šã€Œâ¬‡ï¸ ä¸‹è¼‰æ–°ç‰ˆæœ¬ä¸¦é—œé–‰ã€
   â†“
2. é–‹å•Ÿç€è¦½å™¨ä¸‹è¼‰æ–°ç‰ˆ EXE
   â†“
3. å»¶é² 1 ç§’å¾Œè‡ªå‹•é—œé–‰ç¨‹å¼
   â†“
4. ä½¿ç”¨è€…ä¸‹è¼‰å®Œæˆå¾Œ,åŸ·è¡Œæ–°ç‰ˆ EXE
   â†“
5. å¯é¸: åˆªé™¤èˆŠç‰ˆ EXE
```

---

## å¯¦ä½œç´°ç¯€

### ç‰ˆæœ¬æ¯”è¼ƒé‚è¼¯

**ä½ç½®**: `src/core/version.py`

```python
def is_newer_version(current: str, latest: str) -> bool:
    """
    æ¯”è¼ƒç‰ˆæœ¬è™Ÿ (èªæ„åŒ–ç‰ˆæœ¬)
    
    ä¾‹å¦‚:
    - is_newer_version("1.2.0", "1.3.0") â†’ True
    - is_newer_version("1.2.0", "1.2.1") â†’ True
    - is_newer_version("1.2.0", "1.2.0") â†’ False
    """
```

### GitHub API è«‹æ±‚

**ä½ç½®**: `src/services/update_service.py`

```python
# API Endpoint
GET https://api.github.com/repos/jony-zhou/overtime-assistant/releases/latest

# å›æ‡‰ç¯„ä¾‹
{
  "tag_name": "v1.3.0",
  "name": "v1.3.0 - æ–°åŠŸèƒ½ç™¼å¸ƒ",
  "body": "## æ›´æ–°å…§å®¹\n- æ–°åŠŸèƒ½ A\n- ä¿®æ­£ Bug B",
  "published_at": "2025-12-01T00:00:00Z",
  "html_url": "https://github.com/.../releases/tag/v1.3.0",
  "assets": [
    {
      "name": "overtime-assistant-1.3.0.exe",
      "browser_download_url": "https://.../download/v1.3.0/overtime-assistant-1.3.0.exe"
    }
  ]
}
```

### æ›´æ–°å°è©±æ¡† UI

**ä½ç½®**: `ui/components/update_dialog.py`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‰ ç™¼ç¾æ–°ç‰ˆæœ¬                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ç›®å‰ç‰ˆæœ¬: 1.2.0                â”‚   â”‚
â”‚  â”‚       â†“                          â”‚   â”‚
â”‚  â”‚  æœ€æ–°ç‰ˆæœ¬: 1.3.0                â”‚   â”‚
â”‚  â”‚  ç™¼å¸ƒæ™‚é–“: 2025å¹´12æœˆ01æ—¥       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  æ›´æ–°å…§å®¹:                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ## æ–°åŠŸèƒ½                       â”‚   â”‚
â”‚  â”‚ - åŠŸèƒ½ A                        â”‚   â”‚
â”‚  â”‚ - åŠŸèƒ½ B                        â”‚   â”‚
â”‚  â”‚                                 â”‚   â”‚
â”‚  â”‚ ## æ”¹é€²                         â”‚   â”‚
â”‚  â”‚ - æ”¹é€² C                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  ğŸ’¡ æç¤º:ä¸‹è¼‰å¾Œè«‹é—œé–‰ç›®å‰ç¨‹å¼,          â”‚
â”‚         å†åŸ·è¡Œæ–°ç‰ˆæœ¬                    â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â¬‡ï¸  ä¸‹è¼‰æ–°ç‰ˆæœ¬ä¸¦é—œé–‰             â”‚ â”‚ â† æ¨è–¦
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“¥ åƒ…é–‹å•Ÿä¸‹è¼‰é é¢                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ç¨å¾Œæé†’                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å®‰å…¨æ€§è€ƒé‡ (OWASP)

#### 1. HTTPS Only
```python
# åƒ…ä½¿ç”¨ HTTPS API
self.api_url = f"https://api.github.com/repos/{repo_owner}/{repo_name}/releases/latest"
```

#### 2. é©—è­‰ä¸‹è¼‰ä¾†æº
```python
# åƒ…æ¥å—ä¾†è‡ª github.com çš„ä¸‹è¼‰é€£çµ
if "github.com" in download_url:
    webbrowser.open(download_url)
```

#### 3. ç„¡æ•æ„Ÿè³‡æ–™å‚³è¼¸
- ä¸å‚³é€ä»»ä½•ä½¿ç”¨è€…è³‡æ–™åˆ° GitHub
- API è«‹æ±‚ç‚ºå”¯è®€æ“ä½œ

#### 4. éŒ¯èª¤è™•ç†
```python
try:
    response = requests.get(self.api_url, timeout=5)
    response.raise_for_status()
except requests.exceptions.Timeout:
    logger.warning("æ›´æ–°æª¢æŸ¥è¶…æ™‚")
    return None
except requests.exceptions.ConnectionError:
    logger.warning("ç„¡æ³•é€£ç·šåˆ° GitHub")
    return None
```

---

## æœªä¾†æ”¹é€²æ–¹æ¡ˆ

### éšæ®µäºŒ: è‡ªå‹•ä¸‹è¼‰ (é€²éš) ğŸš€

#### æ–¹æ¡ˆ A: èƒŒæ™¯ä¸‹è¼‰ + é€šçŸ¥å®‰è£

**å„ªé»**:
- âœ… ä½¿ç”¨è€…é«”é©—ä½³,ç„¡éœ€æ‰‹å‹•ä¸‹è¼‰
- âœ… ä¸‹è¼‰å®Œæˆå¾Œæç¤ºå®‰è£

**å¯¦ä½œ**:
```python
class UpdateService:
    def download_update(self, url: str, callback: callable) -> None:
        """èƒŒæ™¯ä¸‹è¼‰æ›´æ–°æª”æ¡ˆ"""
        def download_task():
            response = requests.get(url, stream=True)
            total_size = int(response.headers.get('content-length', 0))
            
            with open('overtime-assistant-new.exe', 'wb') as f:
                for chunk in response.iter_content(chunk_size=8192):
                    f.write(chunk)
                    # å›å ±é€²åº¦
                    callback(progress=...)
        
        thread = threading.Thread(target=download_task, daemon=True)
        thread.start()
```

**æŒ‘æˆ°**:
- âš ï¸ éœ€è™•ç†ä¸‹è¼‰å¤±æ•—ã€ä¸­æ–·ã€æª”æ¡ˆæå£
- âš ï¸ éœ€è¦é€²åº¦æ¢ UI
- âš ï¸ éœ€è¦é©—è­‰ä¸‹è¼‰æª”æ¡ˆå®Œæ•´æ€§ (SHA256)

---

### éšæ®µä¸‰: è‡ªå‹•å®‰è£ (å°ˆæ¥­ç´š) ğŸ¯

#### æ–¹æ¡ˆ B: è‡ªè§£å£“ç¸® + å•Ÿå‹•å™¨

**æ¶æ§‹**:
```
overtime-assistant-1.2.0.exe (ç•¶å‰ç‰ˆæœ¬)
    â†“ ä¸‹è¼‰
overtime-assistant-1.3.0.exe (æ–°ç‰ˆæœ¬)
    â†“ å•Ÿå‹•
updater.exe (æ›´æ–°å•Ÿå‹•å™¨,å…§åµŒæ–¼ EXE)
    â†“ åŸ·è¡Œ
1. é—œé–‰èˆŠç‰ˆ EXE
2. é‡æ–°å‘½å/åˆªé™¤èˆŠç‰ˆ
3. å•Ÿå‹•æ–°ç‰ˆ EXE
```

**å¯¦ä½œæŠ€è¡“**:
- PyInstaller æ‰“åŒ…æ™‚å…§åµŒ `updater.exe`
- ä½¿ç”¨ Windows API ç›£æ§çˆ¶ç¨‹åº
- æ‰¹æ¬¡æª”æ¡ˆè¼”åŠ©åˆªé™¤èˆŠç‰ˆ

**åƒè€ƒå°ˆæ¡ˆ**:
- [pyupdater](https://github.com/Digital-Sapphire/PyUpdater)
- [auto-py-to-exe](https://github.com/brentvollebregt/auto-py-to-exe)

**æŒ‘æˆ°**:
- âš ï¸ éœ€è¦è™•ç† Windows UAC æ¬Šé™
- âš ï¸ æª”æ¡ˆé–å®šå•é¡Œ
- âš ï¸ æ®ºæ¯’è»Ÿé«”èª¤å ±
- âš ï¸ é–‹ç™¼æˆæœ¬é«˜

---

### éšæ®µå››: Delta æ›´æ–° (ä¼æ¥­ç´š) ğŸ¢

#### æ–¹æ¡ˆ C: å·®åˆ†æ›´æ–°

**åŸç†**:
- åƒ…ä¸‹è¼‰è®Šæ›´çš„éƒ¨åˆ† (Binary Diff)
- æ¸›å°‘ä¸‹è¼‰å¤§å°å’Œæ™‚é–“

**æŠ€è¡“**:
- [bsdiff](https://github.com/mendsley/bsdiff) - Binary diff/patch
- [courgette](https://www.chromium.org/developers/design-documents/software-updates-courgette/) - Chrome ä½¿ç”¨çš„å·®åˆ†æ¼”ç®—æ³•

**é©ç”¨å ´æ™¯**:
- æ‡‰ç”¨ç¨‹å¼è¶…é 100MB
- é »ç¹ç™¼å¸ƒå°æ›´æ–°
- ä½¿ç”¨è€…ç¶²è·¯ç’°å¢ƒè¼ƒå·®

**ä¸å»ºè­°åŸå› **:
- ğŸš« æœ¬å°ˆæ¡ˆ EXE ç´„ 50-100MB,å…¨é‡ä¸‹è¼‰å¯æ¥å—
- ğŸš« æ›´æ–°é »ç‡ä¸é«˜ (ç´„ 1-2 é€±/æ¬¡)
- ğŸš« å¯¦ä½œè¤‡é›œåº¦é è¶…æ”¶ç›Š (é•å YAGNI åŸå‰‡)

---

## å»ºè­°æ¡ç”¨æ–¹æ¡ˆ

### ç•¶å‰ç‰ˆæœ¬ (v1.2.0): âœ… å·²å¯¦ä½œ

**ç‰¹é»**: æ‰‹å‹•ä¸‹è¼‰ + æ™ºæ…§å°è©±æ¡†

**è©•ä¼°**:
- âœ… ç°¡å–®å¯é ,ç¬¦åˆ KISS åŸå‰‡
- âœ… ç„¡éœ€æ“”å¿ƒè‡ªå‹•æ›´æ–°å¤±æ•—
- âœ… ä½¿ç”¨è€…å®Œå…¨æŒæ§æ›´æ–°æ™‚æ©Ÿ
- âœ… é–‹ç™¼æˆæœ¬ä½,ç¶­è­·å®¹æ˜“

**é©ç”¨**:
- å€‹äººå°ˆæ¡ˆ
- ä¸­å°å‹åœ˜éšŠå·¥å…·
- æ›´æ–°é »ç‡ä½ (1-2 é€±/æ¬¡)

---

### æœªä¾†ç‰ˆæœ¬ (v1.3.0+): ğŸ¯ å¯é¸å¯¦ä½œ

**æ–¹æ¡ˆ**: èƒŒæ™¯ä¸‹è¼‰ + é€šçŸ¥å®‰è£ (éšæ®µäºŒ)

**ç†ç”±**:
1. **æ¼¸é€²å¼æ”¹é€²**: ä¸ç ´å£ç¾æœ‰åŠŸèƒ½
2. **ä½¿ç”¨è€…é«”é©—æå‡**: è‡ªå‹•ä¸‹è¼‰,ä½†ä»éœ€æ‰‹å‹•å®‰è£
3. **é¢¨éšªå¯æ§**: ä¸‹è¼‰å¤±æ•—ä¸å½±éŸ¿ç¨‹å¼é‹è¡Œ
4. **é–‹ç™¼æˆæœ¬åˆç†**: ç´„ 2-3 å¤©é–‹ç™¼æ™‚é–“

**å¯¦ä½œå„ªå…ˆç´š**: ğŸŸ¡ ä¸­ç­‰

---

## æ¸¬è©¦ç­–ç•¥

### å–®å…ƒæ¸¬è©¦

**æª”æ¡ˆ**: `tests/test_update_service.py`

```python
def test_check_for_updates_success():
    """æ¸¬è©¦æˆåŠŸæª¢æŸ¥æ›´æ–°"""
    
def test_check_for_updates_no_update():
    """æ¸¬è©¦ç„¡æ›´æ–°æ™‚çš„è¡Œç‚º"""
    
def test_check_for_updates_timeout():
    """æ¸¬è©¦è«‹æ±‚è¶…æ™‚"""
    
def test_get_windows_exe_url_found():
    """æ¸¬è©¦æ‰¾åˆ° Windows EXE ä¸‹è¼‰é€£çµ"""
```

### æ•´åˆæ¸¬è©¦

1. **æ¨¡æ“¬ GitHub API å›æ‡‰**: ä½¿ç”¨ `responses` å¥—ä»¶
2. **æ¸¬è©¦å°è©±æ¡†é¡¯ç¤º**: ä½¿ç”¨ `pytest-qt` (å¦‚æœéœ€è¦)
3. **æ¸¬è©¦æŒ‰éˆ•è¡Œç‚º**: Mock `webbrowser.open`

### æ‰‹å‹•æ¸¬è©¦æª¢æŸ¥æ¸…å–®

- [ ] å•Ÿå‹•ç¨‹å¼æ™‚è‡ªå‹•æª¢æŸ¥æ›´æ–°
- [ ] é»æ“Šã€Œæª¢æŸ¥æ›´æ–°ã€æŒ‰éˆ•
- [ ] ç™¼ç¾æ–°ç‰ˆæœ¬æ™‚é¡¯ç¤ºå°è©±æ¡†
- [ ] ç„¡æ›´æ–°æ™‚é¡¯ç¤ºè¨Šæ¯æ¡†
- [ ] é»æ“Šã€Œä¸‹è¼‰ä¸¦é—œé–‰ã€é–‹å•Ÿç€è¦½å™¨ä¸¦é—œé–‰ç¨‹å¼
- [ ] é»æ“Šã€Œåƒ…é–‹å•Ÿä¸‹è¼‰é é¢ã€ä¸é—œé–‰ç¨‹å¼
- [ ] é»æ“Šã€Œç¨å¾Œæé†’ã€é—œé–‰å°è©±æ¡†
- [ ] ç¶²è·¯ä¸­æ–·æ™‚ä¸é¡¯ç¤ºéŒ¯èª¤,éœé»˜å¤±æ•—

---

## ç¨‹å¼ç¢¼å“è³ªæª¢æŸ¥

### SOLID åŸå‰‡æª¢æŸ¥

- âœ… **å–®ä¸€è·è²¬ (SRP)**: 
  - `UpdateService` åªè² è²¬ç‰ˆæœ¬æª¢æŸ¥
  - `UpdateDialog` åªè² è²¬ UI é¡¯ç¤º
  - `MainWindow` å”èª¿æ›´æ–°æµç¨‹

- âœ… **é–‹æ”¾å°é–‰ (OCP)**:
  - å¯æ“´å……æ–°çš„æ›´æ–°ä¾†æº (ç¹¼æ‰¿ `UpdateService`)
  - å¯æ›¿æ›å°è©±æ¡†å¯¦ä½œ

- âœ… **ä¾è³´åè½‰ (DIP)**:
  - `MainWindow` ä¾è³´æŠ½è±¡çš„ `UpdateService`
  - ä½¿ç”¨ä¾è³´æ³¨å…¥æ¨¡å¼

### DRY åŸå‰‡æª¢æŸ¥

- âœ… èƒŒæ™¯ä»»å‹™åŸ·è¡Œçµ±ä¸€ä½¿ç”¨ `_execute_in_background`
- âœ… éŒ¯èª¤è™•ç†çµ±ä¸€åœ¨ `UpdateService` å…§
- âœ… å°è©±æ¡†æ¨£å¼ä½¿ç”¨è¨­è¨ˆç³»çµ± (`ui/config/design_system.py`)

### KISS åŸå‰‡æª¢æŸ¥

- âœ… æ›´æ–°æµç¨‹ç°¡å–®ç›´è§€
- âœ… ç„¡è¤‡é›œçš„å¿«å–æ©Ÿåˆ¶
- âœ… éŒ¯èª¤æ™‚éœé»˜å¤±æ•—,ä¸å¹²æ“¾ä½¿ç”¨è€…

### YAGNI åŸå‰‡æª¢æŸ¥

- âœ… ä¸å¯¦ä½œè‡ªå‹•å®‰è£ (ç•¶å‰ä¸éœ€è¦)
- âœ… ä¸å¯¦ä½œå·®åˆ†æ›´æ–° (éåº¦è¨­è¨ˆ)
- âœ… ä¸å¯¦ä½œæ›´æ–°å›æ»¾ (è¤‡é›œåº¦éé«˜)

---

## åƒè€ƒè³‡æ–™

### æ–‡ä»¶
- [PyInstaller æ–‡ä»¶](https://pyinstaller.org/)
- [GitHub Releases API](https://docs.github.com/en/rest/releases/releases)
- [èªæ„åŒ–ç‰ˆæœ¬ (Semantic Versioning)](https://semver.org/)

### é¡ä¼¼å°ˆæ¡ˆ
- [auto-py-to-exe](https://github.com/brentvollebregt/auto-py-to-exe)
- [PyUpdater](https://github.com/Digital-Sapphire/PyUpdater)
- [Electron Auto Updater](https://www.electronjs.org/docs/latest/api/auto-updater)

---

**æœ€å¾Œæ›´æ–°**: 2025-12-01  
**ç¶­è­·è€…**: é–‹ç™¼åœ˜éšŠ  
**ç‹€æ…‹**: âœ… å·²å¯¦ä½œä¸¦æ¸¬è©¦
